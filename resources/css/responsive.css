/**
 * E-Case System - Responsive Styling
 * Metronic 8 Theme - Mobile-First Responsive Design
 * 
 * Breakpoints (Metronic 8 / Bootstrap 5):
 * - xs: < 576px (mobile portrait)
 * - sm: >= 576px (mobile landscape)  
 * - md: >= 768px (tablet portrait)
 * - lg: >= 992px (tablet landscape / small desktop)
 * - xl: >= 1200px (desktop)
 * - xxl: >= 1400px (large desktop)
 */

/* ============================================
   BASE RESPONSIVE LAYOUT
   ============================================ */

/* Prevent horizontal overflow on all devices */
html,
body {
    overflow-x: hidden !important;
    max-width: 100vw !important;
    position: relative;
}

/* Main containers */
.app-container,
#kt_app_content,
#kt_app_content_container,
#kt_content_container {
    overflow-x: hidden;
    max-width: 100%;
}

/* Cards */
.card {
    max-width: 100%;
    overflow: hidden;
}

.card-body {
    overflow-x: auto;
    -webkit-overflow-scrolling: touch;
}

/* ============================================
   TABLE RESPONSIVE STYLES
   ============================================ */

/* Enhanced table responsive wrapper */
.table-responsive {
    overflow-x: auto;
    -webkit-overflow-scrolling: touch;
    width: 100%;
    max-width: 100%;
    display: block;
    margin: 0;
}

/* Custom scrollbar for tables */
.table-responsive::-webkit-scrollbar {
    height: 8px;
}

.table-responsive::-webkit-scrollbar-track {
    background: #f1f1f1;
    border-radius: 4px;
}

.table-responsive::-webkit-scrollbar-thumb {
    background: #c1c1c1;
    border-radius: 4px;
}

.table-responsive::-webkit-scrollbar-thumb:hover {
    background: #a1a1a1;
}

/* ============================================
   MOBILE RESPONSIVE STYLES
   ============================================ */

/* Tablet and Below (< 992px) */
@media (max-width: 991.98px) {
    /* Visual indicator for horizontal scroll */
    .table-responsive {
        position: relative;
    }

    .table-responsive::after {
        content: '';
        position: absolute;
        top: 0;
        right: 0;
        bottom: 0;
        width: 30px;
        background: linear-gradient(to right, transparent, rgba(255, 255, 255, 0.9));
        pointer-events: none;
        opacity: 1;
        transition: opacity 0.3s;
        z-index: 1;
    }

    .table-responsive.scrolled-right::after {
        opacity: 0;
    }

    /* Minimum table widths */
    .table-responsive table {
        min-width: 600px;
    }

    .table-responsive table.table-wide {
        min-width: 900px;
    }

    /* Card adjustments */
    .card {
        margin-bottom: 1rem;
    }

    .card-header {
        padding: 1rem 1rem 0.75rem;
    }

    .card-body {
        padding: 1rem;
    }

    /* Container padding adjustments */
    .container-xxl {
        padding-left: 1rem;
        padding-right: 1rem;
    }

    /* Stats cards responsive sizing */
    .card-xl-stretch {
        min-height: auto !important;
    }

    /* Button responsive adjustments */
    .btn-group-responsive {
        display: flex;
        flex-direction: column;
        gap: 0.5rem;
    }

    .btn-group-responsive .btn {
        width: 100%;
    }

    /* Page title adjustments */
    .page-heading {
        font-size: 1.75rem !important;
    }

    /* Breadcrumb adjustments */
    .breadcrumb {
        font-size: 0.875rem;
        flex-wrap: wrap;
    }

    /* Alert responsive padding */
    .alert {
        padding: 1rem !important;
    }

    .alert h4,
    .alert h5 {
        font-size: 1rem !important;
    }

    .alert span {
        font-size: 0.875rem !important;
    }

    /* Form responsive adjustments */
    .form-label {
        font-size: 0.9375rem;
        margin-bottom: 0.5rem;
    }

    .form-control,
    .form-select {
        font-size: 0.9375rem;
        padding: 0.625rem 1rem;
    }

    /* Chart containers */
    [id*="chart"],
    canvas {
        max-width: 100% !important;
        height: auto !important;
    }
}

/* Mobile Devices (< 768px) */
@media (max-width: 767.98px) {
    /* Container adjustments */
    .container-xxl {
        padding-left: 0.75rem;
        padding-right: 0.75rem;
    }

    /* Card adjustments */
    .card-header {
        padding: 0.875rem 0.75rem 0.625rem;
    }

    .card-body {
        padding: 0.75rem;
    }

    .card-title {
        font-size: 1.125rem !important;
    }

    /* Grid adjustments */
    .row.g-5,
    .row.g-lg-5 {
        --bs-gutter-x: 0.75rem;
        --bs-gutter-y: 0.75rem;
    }

    /* Button adjustments */
    .btn {
        padding: 0.5rem 1rem;
        font-size: 0.875rem;
    }

    .btn-sm {
        padding: 0.375rem 0.75rem;
        font-size: 0.8125rem;
    }

    .btn-icon {
        width: 32px !important;
        height: 32px !important;
    }

    .btn-icon.btn-sm {
        width: 28px !important;
        height: 28px !important;
    }

    /* Badge adjustments */
    .badge {
        font-size: 0.75rem !important;
        padding: 0.35rem 0.65rem !important;
    }

    /* Stats cards mobile layout */
    .statistics-card {
        min-height: auto !important;
    }

    .statistics-card .card-body {
        padding: 1rem !important;
    }

    .statistics-card i {
        font-size: 2rem !important;
        margin-bottom: 0.5rem !important;
    }

    .statistics-card .fw-bold {
        font-size: 1.5rem !important;
        margin-bottom: 0.25rem !important;
    }

    /* Toolbar responsive */
    .card-toolbar {
        margin-top: 0.75rem;
        width: 100%;
    }

    .card-toolbar .form-select {
        width: 100%;
    }

    /* Search and filter responsive */
    .search-wrapper {
        flex-direction: column !important;
        gap: 0.75rem;
    }

    .search-wrapper > * {
        width: 100% !important;
    }

    /* Page heading */
    .page-heading {
        font-size: 1.5rem !important;
        margin-bottom: 0.5rem !important;
    }

    /* Separator */
    .separator {
        margin: 1rem 0;
    }

    /* Symbol sizes */
    .symbol-70px {
        width: 50px !important;
        height: 50px !important;
    }

    .symbol-100px {
        width: 70px !important;
        height: 70px !important;
    }

    /* Modal responsive */
    .modal-dialog {
        margin: 0.5rem;
    }

    .modal-body {
        padding: 1rem;
    }
}

/* Small Mobile Devices (< 576px) */
@media (max-width: 575.98px) {
    /* Container */
    .container-xxl {
        padding-left: 0.5rem;
        padding-right: 0.5rem;
    }

    /* Card */
    .card {
        margin-bottom: 0.75rem;
    }

    .card-header {
        padding: 0.75rem 0.5rem 0.5rem;
    }

    .card-body {
        padding: 0.625rem 0.5rem;
    }

    /* Grid */
    .row.g-5,
    .row.g-lg-5,
    .row.g-xl-8 {
        --bs-gutter-x: 0.5rem;
        --bs-gutter-y: 0.5rem;
    }

    /* Typography */
    h1,
    .fs-1 {
        font-size: 1.5rem !important;
    }

    h2,
    .fs-2 {
        font-size: 1.25rem !important;
    }

    h3,
    .fs-3 {
        font-size: 1.125rem !important;
    }

    .page-heading {
        font-size: 1.25rem !important;
    }

    /* Buttons */
    .btn {
        padding: 0.5rem 0.875rem;
        font-size: 0.8125rem;
    }

    .btn-lg {
        padding: 0.625rem 1rem;
        font-size: 0.9375rem;
    }

    /* Forms */
    .form-control,
    .form-select {
        font-size: 0.875rem;
        padding: 0.5rem 0.875rem;
    }

    .form-label {
        font-size: 0.875rem;
    }

    /* Stats cards extra small */
    .statistics-card .card-body {
        padding: 0.75rem !important;
    }

    .statistics-card i {
        font-size: 1.75rem !important;
    }

    .statistics-card .fw-bold {
        font-size: 1.25rem !important;
    }

    /* Alert */
    .alert {
        padding: 0.75rem !important;
    }

    .alert i {
        font-size: 1.5rem !important;
    }

    /* Badge */
    .badge {
        font-size: 0.6875rem !important;
        padding: 0.25rem 0.5rem !important;
    }

    /* Hide long text on very small screens */
    .hide-xs {
        display: none !important;
    }

    /* Stack buttons vertically */
    .btn-stack-xs {
        display: flex;
        flex-direction: column;
        width: 100%;
    }

    .btn-stack-xs .btn {
        width: 100%;
        margin-bottom: 0.5rem;
    }

    .btn-stack-xs .btn:last-child {
        margin-bottom: 0;
    }
}

/* ============================================
   DATATABLES RESPONSIVE STYLES
   ============================================ */

/* Tablet and Below */
@media (max-width: 991.98px) {
    /* DataTables controls */
    div.dataTables_wrapper div.dataTables_length,
    div.dataTables_wrapper div.dataTables_filter {
        text-align: left !important;
        margin-bottom: 1rem;
    }

    div.dataTables_wrapper div.dataTables_filter input {
        width: 100% !important;
        margin-left: 0 !important;
    }

    div.dataTables_wrapper div.dataTables_info,
    div.dataTables_wrapper div.dataTables_paginate {
        text-align: center !important;
        margin-top: 1rem;
    }

    /* Pagination */
    div.dataTables_wrapper div.dataTables_paginate ul.pagination {
        justify-content: center;
        flex-wrap: wrap;
        gap: 0.25rem;
    }

    div.dataTables_wrapper div.dataTables_paginate ul.pagination .page-link {
        padding: 0.5rem 0.75rem;
        font-size: 0.875rem;
    }

    /* Table cells */
    table.dataTable td,
    table.dataTable th {
        padding: 0.625rem 0.5rem !important;
        font-size: 0.875rem !important;
    }

    /* Badges in tables */
    table.dataTable .badge {
        font-size: 0.75rem !important;
        padding: 0.3rem 0.6rem !important;
    }

    /* Buttons in tables */
    table.dataTable .btn-sm {
        padding: 0.375rem 0.625rem !important;
        font-size: 0.8125rem !important;
    }

    table.dataTable .btn-icon {
        width: 32px !important;
        height: 32px !important;
    }

    table.dataTable .btn-icon i {
        font-size: 1rem !important;
    }

    /* Responsive child row details */
    table.dataTable.dtr-inline.collapsed>tbody>tr>td.dtr-control:before,
    table.dataTable.dtr-inline.collapsed>tbody>tr>th.dtr-control:before {
        background-color: #009ef7;
        box-shadow: 0 0 0 2px #e1f0ff;
    }

    table.dataTable>tbody>tr.child {
        background-color: #f9f9f9;
    }

    table.dataTable>tbody>tr.child ul.dtr-details {
        width: 100%;
        padding: 0.5rem;
    }

    table.dataTable>tbody>tr.child ul.dtr-details>li {
        border-bottom: 1px solid #eee;
        padding: 0.625rem 0;
    }

    table.dataTable>tbody>tr.child ul.dtr-details>li:last-child {
        border-bottom: none;
    }

    /* Length menu */
    div.dataTables_length select {
        padding: 0.5rem 2rem 0.5rem 0.75rem !important;
        font-size: 0.875rem;
    }
}

/* Mobile */
@media (max-width: 767.98px) {
    /* Table cells */
    table.dataTable td,
    table.dataTable th {
        padding: 0.5rem 0.375rem !important;
        font-size: 0.8125rem !important;
    }

    /* Badges */
    table.dataTable .badge {
        font-size: 0.6875rem !important;
        padding: 0.25rem 0.5rem !important;
    }

    /* Buttons */
    table.dataTable .btn-sm {
        padding: 0.3rem 0.5rem !important;
        font-size: 0.75rem !important;
    }

    table.dataTable .btn-icon {
        width: 28px !important;
        height: 28px !important;
    }

    /* Pagination */
    div.dataTables_wrapper div.dataTables_paginate ul.pagination .page-link {
        padding: 0.375rem 0.5rem;
        font-size: 0.8125rem;
    }

    /* Hide text in action buttons, show only icons */
    table.dataTable .btn-text-mobile-hide {
        display: none !important;
    }
}

/* Small Mobile */
@media (max-width: 575.98px) {
    /* Compact everything */
    table.dataTable td,
    table.dataTable th {
        padding: 0.375rem 0.25rem !important;
        font-size: 0.75rem !important;
    }

    table.dataTable .badge {
        font-size: 0.625rem !important;
        padding: 0.2rem 0.4rem !important;
    }

    div.dataTables_wrapper div.dataTables_paginate ul.pagination .page-link {
        padding: 0.3rem 0.4rem;
        font-size: 0.75rem;
    }

    /* DataTables info */
    div.dataTables_wrapper div.dataTables_info {
        font-size: 0.75rem;
    }
}

/* ============================================
   ASIDE / SIDEBAR RESPONSIVE
   ============================================ */

@media (max-width: 991.98px) {
    /* Aside user info */
    .aside-user-info {
        min-width: 0;
        padding: 0.75rem;
    }

    /* Aside toolbar */
    .aside-toolbar {
        overflow: hidden;
        padding: 0.5rem;
    }

    /* Aside menu */
    .menu-item {
        margin: 0.25rem 0;
    }

    .menu-link {
        padding: 0.625rem 1rem;
    }
}

/* ============================================
   UTILITY RESPONSIVE CLASSES
   ============================================ */

/* Hide/Show based on breakpoints (complement Bootstrap's d-* classes) */
@media (max-width: 575.98px) {
    .d-xs-none {
        display: none !important;
    }

    .d-xs-block {
        display: block !important;
    }

    .d-xs-inline {
        display: inline !important;
    }

    .d-xs-inline-block {
        display: inline-block !important;
    }

    .d-xs-flex {
        display: flex !important;
    }
}

/* Responsive spacing utilities */
@media (max-width: 767.98px) {
    .p-md-responsive {
        padding: 1rem !important;
    }

    .px-md-responsive {
        padding-left: 1rem !important;
        padding-right: 1rem !important;
    }

    .py-md-responsive {
        padding-top: 1rem !important;
        padding-bottom: 1rem !important;
    }

    .m-md-responsive {
        margin: 1rem !important;
    }

    .mx-md-responsive {
        margin-left: 1rem !important;
        margin-right: 1rem !important;
    }

    .my-md-responsive {
        margin-top: 1rem !important;
        margin-bottom: 1rem !important;
    }
}

@media (max-width: 575.98px) {
    .p-sm-responsive {
        padding: 0.75rem !important;
    }

    .px-sm-responsive {
        padding-left: 0.75rem !important;
        padding-right: 0.75rem !important;
    }

    .py-sm-responsive {
        padding-top: 0.75rem !important;
        padding-bottom: 0.75rem !important;
    }

    .m-sm-responsive {
        margin: 0.75rem !important;
    }

    .mx-sm-responsive {
        margin-left: 0.75rem !important;
        margin-right: 0.75rem !important;
    }

    .my-sm-responsive {
        margin-top: 0.75rem !important;
        margin-bottom: 0.75rem !important;
    }
}

/* ============================================
   PRINT STYLES
   ============================================ */

@media print {
    .no-print {
        display: none !important;
    }

    .card {
        break-inside: avoid;
    }

    .table-responsive {
        overflow: visible !important;
    }

    .table-responsive table {
        min-width: auto !important;
    }
}
